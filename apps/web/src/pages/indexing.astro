---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import { StatusIndicator } from '../components/StatusIndicator';
import { IndexingDashboard } from '../components/IndexingDashboard';
---

<Layout title="Indexaci√≥n Vectorial - Hybrid Brain üß†" description="Gestiona la indexaci√≥n sem√°ntica de tu contenido">
  <Header showDashboardLink={true} />
  
  <main class="min-h-screen py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-6xl mx-auto">
      <!-- Page Header -->
      <div class="mb-8">
        <div class="flex items-center gap-3 mb-2">
          <h1 class="text-3xl font-display font-bold text-dark-100">
            üîÆ Motor de B√∫squeda Sem√°ntica
          </h1>
          <span class="px-2 py-1 text-xs bg-primary-500/20 text-primary-400 rounded-full">
            Fase 6
          </span>
        </div>
        <p class="text-dark-400">
          Indexa tu contenido de Notion para b√∫squeda vectorial con IA. Mucho m√°s r√°pido y preciso que la b√∫squeda directa.
        </p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Main content: Indexing Dashboard -->
        <div class="lg:col-span-3">
          <IndexingDashboard client:load />
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
          <StatusIndicator client:load />
          
          <!-- How it works -->
          <div class="card p-4">
            <h3 class="text-sm font-medium text-dark-400 uppercase tracking-wider mb-4">
              üî¨ C√≥mo funciona
            </h3>
            <ul class="space-y-3 text-sm text-dark-400">
              <li class="flex items-start gap-2">
                <span class="text-primary-400 font-mono">1.</span>
                <span>Lee p√°ginas de Notion</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary-400 font-mono">2.</span>
                <span>Divide en fragmentos (chunks)</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary-400 font-mono">3.</span>
                <span>Genera embeddings con Cohere</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary-400 font-mono">4.</span>
                <span>Almacena vectores en Supabase</span>
              </li>
            </ul>
          </div>

          <!-- Architecture -->
          <div class="card p-4">
            <h3 class="text-sm font-medium text-dark-400 uppercase tracking-wider mb-4">
              üèóÔ∏è Arquitectura
            </h3>
            <div class="space-y-2 text-sm text-dark-400 font-mono">
              <p class="text-accent-cyan">Notion ‚Üí Texto</p>
              <p class="text-primary-400 pl-4">‚Üì Chunking</p>
              <p class="text-accent-magenta pl-4">‚Üì Embeddings (Cohere)</p>
              <p class="text-green-400">‚Üí Supabase (pgvector)</p>
            </div>
          </div>

          <!-- Benefits -->
          <div class="card p-4">
            <h3 class="text-sm font-medium text-dark-400 uppercase tracking-wider mb-4">
              ‚ú® Beneficios
            </h3>
            <ul class="space-y-2 text-sm text-dark-400">
              <li class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>B√∫squeda sem√°ntica (no keywords)</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Respuestas m√°s precisas</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Menor latencia (sin llamar Notion)</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-green-400">‚úì</span>
                <span>Escala a miles de documentos</span>
              </li>
            </ul>
          </div>

          <!-- Quick actions -->
          <div class="card p-4">
            <h3 class="text-sm font-medium text-dark-400 uppercase tracking-wider mb-4">
              ‚ö° Navegaci√≥n
            </h3>
            <div class="flex flex-col gap-2">
              <a 
                href="/chat" 
                class="flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-700/50 hover:bg-dark-700 transition-colors text-dark-300 text-sm"
              >
                <span>üí¨</span>
                Chat Sem√°ntico
              </a>
              <a 
                href="/dashboard" 
                class="flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-700/50 hover:bg-dark-700 transition-colors text-dark-300 text-sm"
              >
                <span>‚ûï</span>
                Procesar URLs
              </a>
              <a 
                href="/categories" 
                class="flex items-center gap-2 px-3 py-2 rounded-lg bg-dark-700/50 hover:bg-dark-700 transition-colors text-dark-300 text-sm"
              >
                <span>üìÅ</span>
                Gestionar Categor√≠as
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>
