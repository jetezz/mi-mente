---
import AppLayout from '../../layouts/AppLayout.astro';
import JobEditor from '../../components/jobs/JobEditor.tsx';
import { SidebarCard, QuickActions } from '../../components/ui';

// Obtener el ID del job desde la URL
const { id } = Astro.params;

if (!id) {
  return Astro.redirect('/jobs');
}

const actions = [
  { icon: 'ðŸ“‹', label: 'Ver cola', href: '/jobs' },
  { icon: 'âž•', label: 'AÃ±adir video', href: '/dashboard' },
  { icon: 'ðŸ’¬', label: 'Chat', href: '/chat' }
];
---

<AppLayout title="Editar Resumen" maxWidth="4xl">
  <!-- Main Content -->
  <div slot="main" class="lg:col-span-3 space-y-6">
    <JobEditor jobId={id} client:only="react" />
  </div>

  <!-- Sidebar -->
  <aside slot="sidebar" class="space-y-6">
    <!-- Quick Actions -->
    <SidebarCard title="Acciones" icon="âš¡" client:load>
      <QuickActions actions={actions} client:load />
    </SidebarCard>

    <!-- Tips de ediciÃ³n -->
    <SidebarCard title="Consejos" icon="ðŸ’¡" client:load>
      <ul class="space-y-2 text-sm text-gray-400">
        <li class="flex items-start gap-2">
          <span class="text-purple-400">â€¢</span>
          Puedes editar el tÃ­tulo y contenido antes de guardar
        </li>
        <li class="flex items-start gap-2">
          <span class="text-purple-400">â€¢</span>
          El contenido usa formato Markdown
        </li>
        <li class="flex items-start gap-2">
          <span class="text-purple-400">â€¢</span>
          Selecciona una categorÃ­a para organizar mejor
        </li>
        <li class="flex items-start gap-2">
          <span class="text-purple-400">â€¢</span>
          Las etiquetas ayudan a encontrar el contenido
        </li>
      </ul>
    </SidebarCard>   
  </aside>
</AppLayout>
